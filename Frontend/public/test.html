<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.0.0/nouislider.min.css" />
    <title>Test noUiSlider</title>
    <style>
        .slider-container {
            margin: 50px;
        }
        button {
            margin: 5px;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            width: 300px; /* عرض مشخصی برای کنترل‌ها */
        }
    </style>
</head>
<body>

    <div class="slider-container">
        <div class="slider"></div>
        <div class="valueDisplay">0 - 10,000</div>
        <div class="controls">
            <button class="increaseMax">افزایش حداکثر</button>
            <button class="decreaseMin">کاهش حداقل</button>
        </div>
    </div>

    <div class="slider-container">
        <div class="slider"></div>
        <div class="valueDisplay">0 - 10,000</div>
        <div class="controls">
            <button class="increaseMax">افزایش حداکثر</button>
            <button class="decreaseMin">کاهش حداقل</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.0.0/nouislider.min.js"></script>
    <script>
        const sliders = document.querySelectorAll('.slider');
        const valueDisplays = document.querySelectorAll('.valueDisplay');
        const increaseMaxButtons = document.querySelectorAll('.increaseMax');
        const decreaseMinButtons = document.querySelectorAll('.decreaseMin');

        // تابع فرمت‌دهی عدد
        function formatNumber(value) {
            return new Intl.NumberFormat('fa-IR').format(value);
        }

        sliders.forEach((slider, index) => {
            // ایجاد اسلایدر
            noUiSlider.create(slider, {
                start: [2000, 8000],
                connect: true,
                range: {
                    min: 0,
                    max: 1000000000
                },
                step: 100
            });

            // دریافت مقادیر
            slider.noUiSlider.on('update', function(values) {
                const formattedMin = formatNumber(Math.round(values[0]));
                const formattedMax = formatNumber(Math.round(values[1]));
                valueDisplays[index].innerHTML = `${formattedMax} - ${formattedMin}`; // نمایش به صورت max - min
            });

            // عملکرد دکمه‌ها
            increaseMaxButtons[index].addEventListener('click', function() {
                slider.noUiSlider.set([null, parseFloat(slider.noUiSlider.get()[1]) + 100]); // افزایش مقدار سمت چپ (max)
            });

            decreaseMinButtons[index].addEventListener('click', function() {
                slider.noUiSlider.set([parseFloat(slider.noUiSlider.get()[0]) - 100, null]); // کاهش مقدار سمت راست (min)
            });
        });
    </script>

</body>
</html>